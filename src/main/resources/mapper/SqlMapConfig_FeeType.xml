<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<sqlMap namespace="com.logisticscenter.mapper.FeeTypeDao">
	<typeAlias type="com.entity.FeeTypeEntity" alias="feeTypeE"/>
	<resultMap id="feeTypeMap" class="com.entity.FeeTypeEntity" >
		<result column="id" property="id" jdbcType="INT" />
		<result column="feeName" property="feeName" jdbcType="VARCHAR" />
		<result column="showType" property="showType" jdbcType="INT" nullValue="0"/>
		<result column="isUse" property="isUse" jdbcType="INT" nullValue="0"/>
		<result column="isDelete" property="isDelete" jdbcType="INT" nullValue="0"/>
		<result column="createDate" property="createDate" jdbcType="VARCHAR" />
		<result column="createTime" property="createTime" jdbcType="VARCHAR" />
		<result column="editDate" property="editDate" jdbcType="VARCHAR" />
		<result column="editTime" property="editTime" jdbcType="VARCHAR" />
		<result column="feeTypeColumn" property="feeTypeColumn" jdbcType="VARCHAR" />
	</resultMap>
  
  <!-- 获得全查询列表 -->
  <select id="getAllFeeType" resultMap="feeTypeMap">
    select * from feeType
  </select>
  
   <!--  -->
   <select id="getFeeTypeBy" resultMap="feeTypeMap" parameterClass="feeTypeE">
	select top $pageSize$ * from ( select row_number() over(order by id desc) as rownumber,* from feetype 
	<dynamic prepend="WHERE">
		<isNotEmpty prepend="AND" property="feeName">
			feeName like '%' + #feeName# +  '%' 
		</isNotEmpty>
		<isGreaterThan property="isUse" compareValue="-1" prepend="AND">
			isUse = #isUse# 
		</isGreaterThan>
	</dynamic>
	) A
	<dynamic prepend="WHERE ">
		<isNotEmpty prepend="AND" property="currentPage">
			rownumber > $currentPage$
		</isNotEmpty>
	</dynamic>
     
  </select> 
  
   <!-- 获得分页的count -->
   <select id="getFeeTypeByCount" resultClass="String" parameterClass="feeTypeE">
	select count(*) from ( select row_number() over(order by id) as rownumber,* from feetype ) A
	<dynamic prepend="WHERE">
		<isNotEmpty prepend="AND" property="feeName">
			feeName like '%' + #feeName# +  '%' 
		</isNotEmpty>
		<isGreaterThan property="isUse" compareValue="-1" prepend="AND">
			isUse = #isUse# 
		</isGreaterThan>
	</dynamic>
     
  </select> 
  
  <!-- 根据id获得用户对象 -->
    <select id="getFeeTypeById" resultMap="feeTypeMap">
     select * from feeType where id=#id#
  </select> 
  
   <!-- 新增用户对象 -->
   <insert id="insertFeeType" parameterClass="feeTypeE">
      insert into feeType (feeName,showType,createDate,createTime,isUse) 
      values (#feeName#,#showType#,#createDate#,#createTime#,#isUse#)
      <selectKey resultClass="int" keyProperty="id" type="post">    
			SELECT max(id) as id from feeType
		</selectKey>
   </insert>
   
   <!-- 删除用户对象 -->
   <delete id="deleteFeeType" parameterClass="java.util.List">
     delete from feeType 
	<iterate prepend="WHERE" open="(" close=")"
	conjunction="OR">
	id=#idLst[]#
	</iterate>
   </delete>
   
   <!-- 删除出车信息表中的字段 -->
   <delete id="deleteTruckGoodsReportColumn">
     alter table truckGoodsReport drop column $feeTypeArr$
   </delete>
   
   <!-- 更新费用类型 -->
   <update id="updateFeeType" parameterClass="feeTypeE">
      update feeType set feename=#feeName#,showType=#showType#,isUse=#isUse#,editDate=#editDate#,editTime=#editTime# where id=#id#
   </update>
   
   <!-- 更新费用类型字段名称 -->
   <update id="updateFeeTypeColumn" parameterClass="java.util.Map">
      update feeType set feeTypeColumn=#columnName# where id=#id#
   </update>
   
   <!-- 更新出车信息字段名称 -->
   <update id="updateTruckGoodsReportColumn" parameterClass="java.util.Map">
      <!-- update feeType set feeTypeColumn=#columnName# where id=#id# -->
      alter table truckGoodsReport add $columnName$ $columnLength$
   </update>
</sqlMap>