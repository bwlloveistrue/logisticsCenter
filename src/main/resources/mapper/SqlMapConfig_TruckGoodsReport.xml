<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="TruckGoodsReport">

<cacheModel id="productCache" readOnly="true" type="LRU" serialize="false">

                <flushInterval hours="24"/>

                <flushOnExecute statement="TruckGoodsReport.insertTruckGoodsReport"/>

                <flushOnExecute statement="TruckGoodsReport.deleteTruckGoodsReport"/>

                <flushOnExecute statement="TruckGoodsReport.updateTruckGoodsReport"/>
                
                <flushOnExecute statement="TruckGoodsReport.updateTruckGoodsReportExpense"/>
                
                <flushOnExecute statement="TruckGoodsReport.updateFeeTypeColumns"/>
                
                <flushOnExecute statement="TruckGoodsReport.insertTruckGoodsReportDetail"/>
                
                <flushOnExecute statement="TruckGoodsReport.updateTruckGoodsReportDetail"/>

                <property name="cache-size" value="1000"/>

            </cacheModel>

	<typeAlias type="com.entity.TruckGoodsReportEntity" alias="truckGoodsReportE"/>
	<typeAlias type="com.entity.TruckGoodsReportDetailEntity" alias="truckGoodsReportDetailE"/>
	<resultMap id="truckGoodsReportMap" class="com.entity.TruckGoodsReportEntity" >
		<result column="id" property="id" jdbcType="INT" />
		<result column="reportNumber" property="reportNumber" jdbcType="VARCHAR" />
		<result column="packageFlg" property="packageFlg" jdbcType="INT" nullValue="0"/>
		<result column="packagePrice" property="packagePrice" jdbcType="DECIMAL" />
		<result column="invoiceFlg" property="invoiceFlg" jdbcType="INT" nullValue="0"/>
		<result column="truckPart" property="truckPart" jdbcType="INT" nullValue="0"/>
		<result column="partner" property="partner" jdbcType="VARCHAR" nullValue="0"/>
		<result column="partnerPrice" property="partnerPrice" jdbcType="VARCHAR" />
		<result column="partnerCarry" property="partnerCarry" jdbcType="VARCHAR" />
		<result column="truckNumber" property="truckNumber" jdbcType="VARCHAR" />
		<result column="reportId" property="reportId" jdbcType="INT" />
		<result column="startPlace" property="startPlace" jdbcType="VARCHAR" />
		<result column="endPlace" property="endPlace" jdbcType="VARCHAR" />
		<result column="beginDate" property="beginDate" jdbcType="VARCHAR" />
		<result column="expectedDate" property="expectedDate" jdbcType="VARCHAR" />
		<result column="endDate" property="endDate" jdbcType="VARCHAR" />
		<result column="driver" property="driver" jdbcType="INT" nullValue="0"/>
		<result column="client" property="client" jdbcType="INT" nullValue="0"/>
		<result column="prepaidFlg" property="prepaidFlg" jdbcType="INT" nullValue="0"/>
		<result column="prepaidExpress" property="prepaidExpress" jdbcType="DECIMAL"/>
		<result column="prepaidDesc" property="prepaidDesc" jdbcType="VARCHAR"/>
		<result column="goodsType" property="goodsType" jdbcType="VARCHAR" nullValue="0"/>
		<result column="reportStatus" property="reportStatus" jdbcType="INT" nullValue="0"/>
		<result column="isLater" property="isLater" jdbcType="INT" nullValue="0"/>
		<result column="laterReason" property="laterReason" jdbcType="VARCHAR" />
		<result column="realCarry" property="realCarry" jdbcType="DECIMAL" nullValue="0"/>
		<result column="price" property="price" jdbcType="DECIMAL" nullValue="0"/>
		<result column="expensens" property="expensens" jdbcType="DECIMAL" nullValue="0"/>
		<result column="cost" property="cost" jdbcType="DECIMAL" nullValue="0"/>
		<result column="profit" property="profit" jdbcType="DECIMAL" nullValue="0"/>
		<result column="carryNumber" property="carryNumber" jdbcType="VARCHAR" />
		<result column="accessorys" property="accessorys" jdbcType="VARCHAR" />
		<result column="workPlace" property="workPlace" jdbcType="VARCHAR" />
		<result column="remark" property="remark" jdbcType="VARCHAR" />
		<result column="customerOrder" property="customerOrder" jdbcType="VARCHAR" />
		<result column="settlement" property="settlement" jdbcType="VARCHAR" />
		<result column="createDate" property="createDate" jdbcType="VARCHAR" />
		<result column="createTime" property="createTime" jdbcType="VARCHAR" />
		<result column="editDate" property="editDate" jdbcType="VARCHAR" />
		<result column="editTime" property="editTime" jdbcType="VARCHAR" />
	</resultMap>
	
	<resultMap id="truckGoodsReportMap1" class="com.entity.TruckGoodsReportEntity" >
		<result column="id" property="id" jdbcType="INT" />
		<result column="reportNumber" property="reportNumber" jdbcType="VARCHAR" />
		<result column="packageFlg" property="packageFlg" jdbcType="INT" nullValue="0"/>
		<result column="packagePrice" property="packagePrice" jdbcType="DECIMAL" />
		<result column="invoiceFlg" property="invoiceFlg" jdbcType="INT" nullValue="0"/>
		<result column="truckPart" property="truckPart" jdbcType="INT" nullValue="0"/>
		<result column="partner" property="partner" jdbcType="VARCHAR" nullValue="0"/>
		<result column="partnerPrice" property="partnerPrice" jdbcType="VARCHAR" />
		<result column="partnerCarry" property="partnerCarry" jdbcType="VARCHAR" />
		<result column="truckNumber" property="truckNumber" jdbcType="VARCHAR" />
		<result column="reportId" property="reportId" jdbcType="INT" />
		<result column="startPlace" property="startPlace" jdbcType="VARCHAR" />
		<result column="endPlace" property="endPlace" jdbcType="VARCHAR" />
		<result column="beginDate" property="beginDate" jdbcType="VARCHAR" />
		<result column="expectedDate" property="expectedDate" jdbcType="VARCHAR" />
		<result column="endDate" property="endDate" jdbcType="VARCHAR" />
		<result column="driver" property="driver" jdbcType="INT" nullValue="0"/>
		<result column="client" property="client" jdbcType="INT" nullValue="0"/>
		<result column="prepaidFlg" property="prepaidFlg" jdbcType="INT" nullValue="0"/>
		<result column="prepaidExpress" property="prepaidExpress" jdbcType="DECIMAL"/>
		<result column="prepaidDesc" property="prepaidDesc" jdbcType="VARCHAR"/>
		<result column="goodsType" property="goodsType" jdbcType="VARCHAR" nullValue="0"/>
		<result column="reportStatus" property="reportStatus" jdbcType="INT" nullValue="0"/>
		<result column="isLater" property="isLater" jdbcType="INT" nullValue="0"/>
		<result column="laterReason" property="laterReason" jdbcType="VARCHAR" />
		<result column="realCarry" property="realCarry" jdbcType="DECIMAL" nullValue="0"/>
		<result column="price" property="price" jdbcType="DECIMAL" nullValue="0"/>
		<result column="expensens" property="expensens" jdbcType="DECIMAL" nullValue="0"/>
		<result column="cost" property="cost" jdbcType="DECIMAL" nullValue="0"/>
		<result column="profit" property="profit" jdbcType="DECIMAL" nullValue="0"/>
		<result column="carryNumber" property="carryNumber" jdbcType="VARCHAR" />
		<result column="accessorys" property="accessorys" jdbcType="VARCHAR" />
		<result column="workPlace" property="workPlace" jdbcType="VARCHAR" />
		<result column="remark" property="remark" jdbcType="VARCHAR" />
		<result column="customerOrder" property="customerOrder" jdbcType="VARCHAR" />
		<result column="settlement" property="settlement" jdbcType="VARCHAR" />
		<result column="createDate" property="createDate" jdbcType="VARCHAR" />
		<result column="createTime" property="createTime" jdbcType="VARCHAR" />
		<result column="editDate" property="editDate" jdbcType="VARCHAR" />
		<result column="editTime" property="editTime" jdbcType="VARCHAR" />
		<result column="feeTypeValue" property="feeTypeValue" jdbcType="VARCHAR" />
	</resultMap>
	
	<!-- 计算费用/盈利/运费的合计 -->
	<resultMap id="truckGoodsReportSumMap" class="com.entity.TruckGoodsReportEntity" >
		<result column="expensens" property="expensens" jdbcType="DECIMAL" nullValue="0"/>
		<result column="cost" property="cost" jdbcType="DECIMAL" nullValue="0"/>
		<result column="profit" property="profit" jdbcType="DECIMAL" nullValue="0"/>
	</resultMap>
	
	
	
	<resultMap id="truckGoodsReportDetailMap" class="com.entity.TruckGoodsReportDetailEntity" >
		<result column="id" property="id" jdbcType="INT" />
		<result column="truckOrder" property="truckOrder" jdbcType="INT" />
		<result column="goodsType" property="goodsType" jdbcType="INT" nullValue="0"/>
		<result column="deleteFlg" property="deleteFlg" jdbcType="INT" nullValue="0"/>
		<result column="price" property="price" jdbcType="DECIMAL" nullValue="0"/>
		<result column="realCarry" property="realCarry" jdbcType="DECIMAL" nullValue="0"/>
		<result column="invoiceFlg" property="invoiceFlg" jdbcType="INT" nullValue="0"/>
		<result column="liftingCost" property="liftingCost" jdbcType="DECIMAL" nullValue="0"/>
		<result column="startPlace" property="startPlace" jdbcType="VARCHAR" nullValue=""/>
		<result column="endPlace" property="endPlace" jdbcType="VARCHAR" nullValue=""/>
		<result column="createDate" property="createDate" jdbcType="VARCHAR" nullValue=""/>
		<result column="createTime" property="createTime" jdbcType="VARCHAR" nullValue=""/>
		<result column="editDate" property="editDate" jdbcType="VARCHAR" nullValue=""/>
		<result column="editTime" property="editTime" jdbcType="VARCHAR" nullValue=""/>
	</resultMap>
	
	<resultMap id="feeTypeValueMap" class="com.entity.FeeTypeValueEntity" >
		<result column="feeType" property="feeType" jdbcType="VARCHAR" />
		<result column="feeTypeValue" property="feeTypeValue" jdbcType="VARCHAR" />
	</resultMap>
  
  <!-- 获得全查询列表 -->
  <select id="getAllTruckGoodsReport" resultMap="truckGoodsReportMap">
    select * from truckGoodsReport
    <dynamic prepend="WHERE ">
    <isNotNull property="value" prepend="AND">
    	reportStatus = $value$
    </isNotNull>
    </dynamic>
  </select>
  
   <!-- 根据条件专门费用 -->
   <select id="getTruckGoodsReportBy" resultMap="truckGoodsReportMap1" parameterClass="truckGoodsReportE" cacheModel="productCache">
		<isNotEmpty property="getFeeTypecolumn">
			select top $pageSize$ * from ( select row_number() over(order by id desc) as rownumber,*,$getFeeTypecolumn$ feeTypeValue from truckGoodsReport 
		</isNotEmpty>
		<isEmpty property="getFeeTypecolumn">
			select top $pageSize$ * from ( select row_number() over(order by id desc) as rownumber,*,id feeTypeValue from truckGoodsReport 
		</isEmpty>
	<dynamic prepend="WHERE ">
		<isNotEmpty prepend="AND" property="truckNumber">
			truckNumber=#truckNumber#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="startPlace">
			startPlace like '%' + #startPlace# +  '%' 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="endPlace">
			endPlace like '%' + #endPlace# +  '%' 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="beginDate">
			beginDate &gt;= #beginDate#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="endDate">
			endDate &lt; #endDate#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="carryNumber">
			carryNumber like '%' + #carryNumber# +  '%' 
		</isNotEmpty>
		<isLessThan prepend="AND" property="reportStatus" compareValue="3">
			reportStatus=#reportStatus#
		</isLessThan>
		<isGreaterThan prepend="AND" property="driver" compareValue="-1">
			driver=#driver#
		</isGreaterThan>
		<isGreaterThan prepend="AND" property="client" compareValue="-1">
			client=#client#
		</isGreaterThan>
		<isNotEmpty prepend="AND" property="goodsType">
			','+goodsType+',' like '%,'+#goodsType#+',%'
		</isNotEmpty>
	</dynamic>
	) A
	<dynamic prepend="WHERE ">
		<isNotEmpty prepend="AND" property="currentPage">
			rownumber > $currentPage$
		</isNotEmpty>
	</dynamic>
  </select> 
  
  
  <!-- 根据条件查询出车信息 -->
   <select id="getTruckGoodsReportExcelBy" resultMap="truckGoodsReportMap" parameterClass="truckGoodsReportE" cacheModel="productCache">
	select * from truckGoodsReport 
	<dynamic prepend="WHERE ">
		<isNotEmpty prepend="AND" property="truckNumber">
			truckNumber=#truckNumber#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="startPlace">
			startPlace like '%' + #startPlace# +  '%' 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="endPlace">
			endPlace like '%' + #endPlace# +  '%' 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="beginDate">
			beginDate &gt;= #beginDate#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="endDate">
			endDate &lt; #endDate#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="carryNumber">
			carryNumber like '%' + #carryNumber# +  '%' 
		</isNotEmpty>
		<isLessThan prepend="AND" property="reportStatus" compareValue="3">
			reportStatus=#reportStatus#
		</isLessThan>
		<isGreaterThan prepend="AND" property="driver" compareValue="-1">
			driver=#driver#
		</isGreaterThan>
		<isGreaterThan prepend="AND" property="client" compareValue="-1">
			client=#client#
		</isGreaterThan>
		<isNotEmpty prepend="AND" property="goodsType">
			','+goodsType+',' like '%,'+#goodsType#+',%'
		</isNotEmpty>
	</dynamic>
	
  </select> 
  
  
  <!-- 根据条件查询出车分页pageTotal -->
   <select id="getTruckGoodsReportByCount" resultClass="String" parameterClass="truckGoodsReportE" cacheModel="productCache">
	select count(*) from ( select row_number() over(order by id) as rownumber,* from truckGoodsReport ) A
	<dynamic prepend="WHERE ">
		<isNotEmpty prepend="AND" property="truckNumber">
			truckNumber=#truckNumber#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="startPlace">
			startPlace like '%' + #startPlace# +  '%' 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="endPlace">
			endPlace like '%' + #endPlace# +  '%' 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="beginDate">
			beginDate &gt;= #beginDate#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="endDate">
			endDate &lt; #endDate#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="carryNumber">
			carryNumber like '%' + #carryNumber# +  '%' 
		</isNotEmpty>
		<isLessThan prepend="AND" property="reportStatus" compareValue="3">
			reportStatus=#reportStatus#
		</isLessThan>
		<isGreaterThan prepend="AND" property="driver" compareValue="-1">
			driver=#driver#
		</isGreaterThan>
		<isGreaterThan prepend="AND" property="client" compareValue="-1">
			client=#client#
		</isGreaterThan>
		<isNotEmpty prepend="AND" property="goodsType">
			goodsType=#goodsType#
		</isNotEmpty>
		
	</dynamic>
     
  </select> 
  
  <!-- 根据id获得用户对象 -->
    <select id="getTruckGoodsReportById" resultMap="truckGoodsReportMap" cacheModel="productCache">
     select * from truckGoodsReport where id=#id#
  </select> 
  
  <!-- 根据查询条件计算费用/盈利/运费的合计 -->
    <select id="getTruckGoodsReportSum" resultMap="truckGoodsReportSumMap" parameterClass="truckGoodsReportE" cacheModel="productCache">
     select sum(expensens) expensens,sum(cost) cost ,sum(profit) profit from truckgoodsreport
     <dynamic prepend="WHERE ">
		<isNotEmpty prepend="AND" property="truckNumber">
			truckNumber=#truckNumber#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="startPlace">
			startPlace like '%' + #startPlace# +  '%' 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="endPlace">
			endPlace like '%' + #endPlace# +  '%' 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="beginDate">
			beginDate &gt;= #beginDate#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="endDate">
			endDate &lt; #endDate#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="carryNumber">
			carryNumber like '%' + #carryNumber# +  '%' 
		</isNotEmpty>
		<isLessThan prepend="AND" property="reportStatus" compareValue="3">
			reportStatus=#reportStatus#
		</isLessThan>
		<isGreaterThan prepend="AND" property="driver" compareValue="-1">
			driver=#driver#
		</isGreaterThan>
		<isGreaterThan prepend="AND" property="client" compareValue="-1">
			client=#client#
		</isGreaterThan>
		<isNotEmpty prepend="AND" property="goodsType">
			','+goodsType+',' like '%,'+#goodsType#+',%'
		</isNotEmpty>
	</dynamic>
     
  </select> 
  
	<!-- 新增用户对象 -->
	<insert id="insertTruckGoodsReport" parameterClass="truckGoodsReportE" >
		insert into truckGoodsReport (
		packageFlg,
		packagePrice,
		invoiceFlg,
		truckPart,
		partner,
		partnerPrice,
		partnerCarry,
		reportNumber,
		truckNumber,
		reportId,
		startPlace,
		endPlace,
		beginDate,
		expectedDate,
		endDate,
		driver,
		client,
		prepaidFlg,
		prepaidExpress,
		prepaidDesc,
		goodsType,
		reportStatus,
		isLater,
		laterReason,
		realCarry,
		price,
		expensens,
		carryNumber,
		workPlace,
		remark,
		customerOrder,
		settlement,
		createDate,
		createTime,
		editDate,
		editTime) 
		values (
		#packageFlg#,
		#packagePrice#,
		#invoiceFlg#,
		#truckPart#,
		#partner#,
		#partnerPrice#,
		#partnerCarry#,
		#reportNumber#,
		#truckNumber#,
		#reportId#,
		#startPlace#,
		#endPlace#,
		#beginDate#,
		#expectedDate#,
		#endDate#,
		#driver#,
		#client#,
		#prepaidFlg#,
		#prepaidExpress#,
		#prepaidDesc#,
		#goodsType#,
		#reportStatus#,
		#isLater#,
		#laterReason#,
		#realCarry#,
		#price#,
		#expensens#,
		#carryNumber#,
		#workPlace#,
		#remark#,
		#customerOrder#,
		#settlement#,
		#createDate#,
		#createTime#,
		#editDate#,
		#editTime#)
		<selectKey resultClass="int" keyProperty="id" type="post">    
			SELECT max(id) as id from truckGoodsReport
		</selectKey>
   </insert>
   
   <!-- 删除用户对象 -->
   <delete id="deleteTruckGoodsReport" parameterClass="java.util.List">
     delete from truckGoodsReport 
     <iterate prepend="WHERE" open="(" close=")"
	conjunction="OR">
	id=#idLst[]#
	</iterate>
   </delete>
   
   <!-- 更新出车信息 -->
   <update id="updateTruckGoodsReport" parameterClass="truckGoodsReportE">
		update truckGoodsReport set 
			truckNumber=#truckNumber#,
			startPlace=#startPlace#,
			endPlace=#endPlace#,
			beginDate=#beginDate#,
			expectedDate=#expectedDate#,
			endDate=#endDate#,
			driver=#driver#,
			client=#client#,
			prepaidFlg=#prepaidFlg#,
			prepaidExpress=#prepaidExpress#,
			prepaidDesc=#prepaidDesc#,
			goodsType=#goodsType#,
			reportStatus=#reportStatus#,
			isLater=#isLater#,
			laterReason=#laterReason#,
			realCarry=#realCarry#,
			price=#price#,
			remark=#remark#,
			customerOrder=#customerOrder#,
			carryNumber=#carryNumber#,
			settlement=#settlement#,
			accessorys=#accessorys#
		 where id=#id#
   </update>
   
   <!-- 更新出车费用信息 -->
   <update id="updateTruckGoodsReportExpense" parameterClass="truckGoodsReportE">
		update truckGoodsReport set 
			expensens=#expensens#,
			cost=#cost#,
			profit=#profit#
		where id=#id#
   </update>
   
   <!-- 更新出车费用信息 -->
   <update id="updateFeeTypeColumns" parameterClass="java.util.Map">
		update truckGoodsReport set 
			$updSqlColumn$
		 where id=$reportId$
   </update>
   
   <!-- 获得全查询列表 -->
  <select id="getColumnValue" parameterClass="java.util.Map" resultMap="feeTypeValueMap" cacheModel="productCache">
    SELECT feeType=attribute,feeTypeValue=value
		FROM (select * from truckgoodsreport where id = $reportId$)a
		  UNPIVOT
		  (
		    value FOR attribute IN($columnName$)
		  ) AS UPV
  </select>
   
   <!-- 根据条件查询出车信息 -->
   <select id="getTruckGoodsReportByImport" resultMap="truckGoodsReportMap" parameterClass="truckGoodsReportE" cacheModel="productCache">
	select * from truckGoodsReport 
	<dynamic prepend="WHERE ">
		<isNotEmpty prepend="AND" property="truckNumber">
			truckNumber=#truckNumber#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="startPlace">
			startPlace like '%' + #startPlace# +  '%' 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="endPlace">
			endPlace like '%' + #endPlace# +  '%' 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="beginDate">
			beginDate &gt;= #beginDate#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="endDate">
			endDate &lt; #endDate#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="carryNumber">
			carryNumber like '%' + #carryNumber# +  '%' 
		</isNotEmpty>
		<isLessThan prepend="AND" property="reportStatus" compareValue="3">
			reportStatus=#reportStatus#
		</isLessThan>
		<isGreaterThan prepend="AND" property="driver" compareValue="-1">
			driver=#driver#
		</isGreaterThan>
		<isGreaterThan prepend="AND" property="client" compareValue="-1">
			client=#client#
		</isGreaterThan>
		<isNotEmpty prepend="AND" property="goodsType">
			','+goodsType+',' like '%,'+#goodsType#+',%'
		</isNotEmpty>
	</dynamic>
  </select>
  
  
  <!-- 新增预录出车详细信息 -->
	<insert id="insertTruckGoodsReportDetail" parameterClass="truckGoodsReportDetailE">
		insert into truckGoodsReportDetail (
			truckOrder,
			goodsType,
			deleteFlg,
			price,
			realCarry,
			invoiceFlg,
			liftingCost,
			startPlace,
			endPlace,
			createDate,
			createTime,
			editDate,
			editTime
		) 
		values 
		(
			#truckOrder#,
			#goodsType#,
			#deleteFlg#,
			#price#,
			#realCarry#,
			#invoiceFlg#,
			#liftingCost#,
			#startPlace#,
			#endPlace#,
			#createDate#,
			#createTime#,
			#editDate#,
			#editTime#
		)
		<selectKey resultClass="int" keyProperty="id" type="post">    
			SELECT max(id) as id from truckGoodsOrderDetail
		</selectKey>
	</insert> 
	
	<!-- 新增预录出车详细信息 -->
	<select id="getTruckGoodsReportDetail" parameterClass="truckGoodsReportDetailE" resultMap="truckGoodsReportDetailMap" cacheModel="productCache">
		select * from truckGoodsReportDetail 
			<dynamic prepend="WHERE ">
				<isNotEmpty prepend="AND" property="truckOrder">
					truckOrder = #truckOrder#
				</isNotEmpty>
				
		</dynamic>
	</select> 
	
	<!-- 新增预录出车详细信息 -->
	<select id="getTruckGoodsReportDetailByOrders" resultMap="truckGoodsReportDetailMap" cacheModel="productCache">
		select * from truckGoodsReportDetail where truckOrder in ($truckOrders$)
	</select> 
	
	<!-- 更新预录出车详细信息 -->
	<update id="updateTruckGoodsReportDetail" parameterClass="truckGoodsReportDetailE" >
		update truckGoodsReportDetail set realCarry = #realCarry#,liftingCost=#liftingCost# where id=#id#
	</update> 
	
	<!-- 获得最大订单编号 -->
	<select id="getMaxReportNumber"  resultClass="String" cacheModel="productCache">
		select max(reportNumber) from truckGoodsReport where reportNumber like '%$date$%'
	</select> 
   
</sqlMap>
